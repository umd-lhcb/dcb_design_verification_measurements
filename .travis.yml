notifications:
    email: false

cache:
    directories:
        - "$HOME/miniconda"
        - "$HOME/.cache/Tectonic"

install:
    - export PATH="$HOME/miniconda/bin:$PATH"
    - if ! command -v conda > /dev/null; then
          wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh;
          bash miniconda.sh -b -p $HOME/miniconda -u;
          conda config --add channels conda-forge;
          conda config --set always_yes yes;
          conda update --all;
          conda install tectonic;
      fi
    - conda info -a

script:
    - cp ./ci/post-xxx-sample.txt ./.git/hooks/post-checkout
    - chmod +x ./.git/hooks/post-checkout
    - git checkout
    - tectonic ./dcb_design_verification_measurements.tex --print

deploy:
    provider: releases
    api_key:
        secure: bDASkwiddjZAP7lJOCByLJXLiY5TtBS2JBsAFAwP5bebu/Meui/GGABeMh6mi7pthgcekfrj40CwQZllRqGvyAYpUUzKs2EIR4QQHIRK6ndeiFybzKoxBdhWzp+UGHzJckPTkVsR6m2qjJXTo+oedPdAOPMU5qpWndMmjEAT8WYlfEHIsnB9iQLVgCki0p+MmqjITdioNRoTRRIVUJKVMU1yVzTeYaZIh9MBa1OrFPVlmz2oY4j/HRY5vO84Tybe7BYtBwfD/BOtDvMSN0EsiuVIphTTPwY4HgHI3mQnI4uu+m0mE6WKBx7rbDeo+rYF6urei8z2J3IXI+ycxx4K0BYx+v3xRNowL5n5ce2V6MdyNbCjbAXxum287YzhAGhq+q2YuQVwsgDp6oosVfoNatnjQITMsTUZxugITeFUU9uLbbxhpoHL1I9PwnM97QjcyPjT9eYb7DIgHB8AaPoPIEprysQvgq5s3aoTYqaWOqGqhI9VVP3Ala+ra5yvNoddiyc17MpV4oDd9fq24LoYe3T194HocBQK1jZv/m0St+pV6/2AZnS3alrUfYzfhbaLQsuJWUhz/IIhtODp/xuyrAKaG7p6RqNpga6PodPo/mjek2BTOS7MnE4n+/izM+epOL9kpH4xkFiWxEWtpuj1mj6RCjDtR86LGyy4wSIqr8Y=
    file:
        - "./dcb_design_verification_measurements.pdf"
    skip_cleanup: true
    on:
        tags: true
        repo: umd-lhcb/dcb_design_verification_measurements
